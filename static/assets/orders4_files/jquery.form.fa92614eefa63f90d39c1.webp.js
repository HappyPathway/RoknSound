(function($){$.Form={form:'',inputSelector:'',opts:{inputTypes:['text','password','search','tel','url','email','number'],toggleTextareaLabels:!1,checkVersion:!0},moz:!1};var methods={init:function(options){$.extend($.Form.opts,options);if($.Form.opts.checkVersion){if(($.browser.webkit&&$.browser.safari&&parseFloat($.browser.version)<528)||($.browser.msie&&parseFloat($.browser.version)<8)||($.browser.mozilla&&parseFloat($.browser.version)<2&&!$.browser.version.match(/1.9.2/gi))){return this}else{$('body').addClass('jsform')}}
if($.browser.mozilla){$.Form.moz=!0}
var i;for(i=0;i<$.Form.opts.inputTypes.length;i++){$.Form.inputSelector+=($.Form.inputSelector?', ':'')+'input[type="'+$.Form.opts.inputTypes[i]+'"]'}
return this.each(function(){var $this=$(this),data=$this.data('form');if(!data){methods.addEvents.apply(this,arguments);$(this).data('form',{target:$this})}})},destroy:function(){return this.each(function(){var $this=$(this);methods.removeEvents.apply(this,arguments);$this.removeData('form')})},addEvents:function(){var field,events;$($.Form.inputSelector+', textarea, select',$(this)).each(function(){methods.addFieldEvents.apply(this,[])})},addFieldEvents:function(){$this=$(this);if(methods.checkTarget($this)===!1){return}
var thissibling=$this.siblings('span.revealbutton');if($this.prop('type')==='password'&&thissibling.length<1){methods.passwordVisibility.apply($this[0])}
events={'keyup.form':methods.keyupField,'change.form':methods.keyupField,'focus.form':methods.focusField,'blur.form':methods.blurField};if($this.is('select')){events={'keyup.form':methods.keyupField,'focus.form':methods.focusField,'change.form':methods.blurField}}else{methods.toggleLabel($this)}
$this.on(events);if($this.hasClass('revealPassword')){if(($.browser.msie===!0&&parseInt($.browser.version,10)<9)){$this.removeClass('revealPassword')}else{$this.closest('span.field').on({'mouseover.form':methods.showRevealButton,'mouseout.form':methods.hideRevealButton})}}},removeEvents:function(){return $($.Form.inputSelector+', textarea, select',$(this)).each(function(){$(this).off('.form')})},checkTarget:function(etarget){return!((!etarget.is('input')&&($.Form.opts.toggleTextareaLabels&&!etarget.is('textarea'))&&(!etarget.is('select')))||(etarget.is('input')&&jQuery.inArray(etarget.prop('type'),$.Form.opts.inputTypes)===-1))},focusField:function(e){var etarget=$(this),type,thisli,tooltip;if($.Form.moz){clearInterval(etarget.data('valueTimer'));etarget.data('valueTimer',setInterval(function(){$('li.active input').each(function(){if($.inArray($(this).prop('type'),$.Form.opts.inputTypes)!==-1){methods.toggleLabel($(this))}})},200))}
methods.toggleLabel(etarget);thisli=etarget.closest('li').addClass('active');if(thisli.hasClass('error')){etarget.data('oldval',etarget.val())}
tooltip=$('.tooltip',thisli);if(tooltip.css('display')!=='block'){tooltip.fadeIn('fast')}
etarget=thisli=null},blurField:function(e){var etarget=$(this),thisli,tooltip;if($.Form.moz){clearInterval(etarget.data('valueTimer'))}
methods.toggleLabel(etarget);thisli=etarget.closest('li').removeClass('active');tooltip=$('.tooltip',thisli).fadeOut('fast');if(thisli.hasClass('error')&&(etarget.is('input')||etarget.is('select')||etarget.is('textarea'))){if(etarget.data('oldval')!==etarget.val()){thisli.removeClass('error');tooltip.remove()}}
etarget.removeData('oldval');if($this.hasClass('revealPassword')){methods.hideRevealButton.apply($this.closest('span.field')[0],[])}},keyupField:function(e){var $this=$(this);if(e.keyCode===27||e.keyCode===9){return}
methods.toggleLabel($this);if($this.hasClass('revealPassword')){if($.trim(this.value==='')){methods.showRevealButton.apply($this.closest('span.field')[0],[])}else{methods.hideRevealButton.apply($this.closest('span.field')[0],[])}}},passwordVisibility:function(){var showbutton=$(jQuery('<span class="revealbutton">Reveal</span>')).on('click',methods.togglePassword);$(this).before(showbutton)},showRevealButton:function(){var $this=$(this),button=$this.find('span.revealbutton');if(button.length>0&&$.trim($this.find('input')[0].value)!==''){var timer=$this.data('revealTimer');clearInterval(timer);$this.data('revealTimer',setTimeout(function(){$this.find('span.revealbutton').fadeIn('fast')},400))}},hideRevealButton:function(){var $this=$(this),button=$this.find('span.revealbutton');if(button.length>0){var timer=$this.data('revealTimer');clearInterval(timer);if(button.css('display')!=='none'){$this.data('revealTimer',setTimeout(function(){$this.find('span.revealbutton').fadeOut('fast')},150))}}},togglePassword:function(){var button=$(this),$this=button.siblings('input[type="password"], input[type="text"]'),newtype='text',buttonText='Conceal';if($this[0].type==='text'){newtype='password';buttonText='Reveal'}
button.text(buttonText);newThis=$this.clone(!0).prop('type',newtype);$this.replaceWith(newThis)},toggleLabel:function(etarget){if(etarget.is('input')||(etarget.is('textarea')&&$.Form.opts.toggleTextareaLabels===!0)){$('.optionalMark'+(etarget.is('input')||$.Form.opts.toggleTextareaLabels===!0?', label':''),etarget.closest('li')).css('display',(etarget.val().length>0?'none':'block'))}}};$.fn.Form=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments)}else{return!1}}})(jQuery)